
(function(){var e=false,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(a){function c(){!e&&this.init&&this.init.apply(this,arguments)}var d=this.prototype;e=true;var f=new this;e=false;for(var g in a)f[g]=typeof a[g]=="function"&&typeof d[g]=="function"&&b.test(a[g])?function(h,i){return function(){var j=this._super;this._super=d[h];var k=i.apply(this,arguments);this._super=j;return k}}(g,a[g]):a[g];c.prototype=f;c.constructor=c;c.extend=arguments.callee;
return c}})();var argumentsToArray=function(e){for(var b=[],a=0;a<e.length;a++)b.push(e[a]);return b};Function.prototype.delayApply=function(e,b,a){var c=this;return setTimeout(function(){c.apply(b,a)},e)};Function.prototype.delayCall=function(e,b){return this.delayApply(e,b,argumentsToArray(arguments).slice(2))};
var G_PLAYER_INSTANCE=null,G_FLASH_INIT=0,KankanObj=Class.extend(new function(){var e=[];this.init=function(){this.isIE=navigator.appName.indexOf("Microsoft")!=-1};this.mStatSend=function(b){var a=new Image(1,1);a.onerror=function(){};a.src=b};this.getDebugBuffer=function(){return e};this.trace=function(b,a){if(a=="onProgress")return false;try{var c=new Date,d=G_PLAYER_ERROR,f=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"."+c.getTime()%1E3;e.unshift(f+"  : "+b+","+a);e=e.slice(0,1E3);if(d.debugShowed)this.$("debugInfoContainer").innerHTML=
f+"  : "+b+","+a+"<br />"+this.$("debugInfoContainer").innerHTML}catch(g){}};this.getParameter=function(b){b=RegExp("[?&]"+b+"=([^&#]+)","g");try{var a=b.exec(this.getLoc())}catch(c){}return null!=a?decodeURIComponent(a[1]):null};this.rand=function(b,a){return b+Math.round(Math.random()*(a-b))};this.getLoc=function(){try{return document.location.href}catch(b){}};this.$=function(b){return document.getElementById(b)};this.getCookie=function(b){try{var a=document.cookie.match(RegExp("(^"+b+"| "+b+")=([^;]*)"))==
null?"":decodeURIComponent(RegExp.$2);return a!=""?a:""}catch(c){return""}};this.time=function(){return(new Date).getTime()};this.pageRefresh=function(){var b=window.location.href,a=b.split("#");window.location=b.indexOf("?")>0?a[0]+"&rd="+this.time():a[0]+"?rd="+this.time();return true};this.$C=function(b){return document.createElement(b)};this.$P=function(b,a){return a?a.appendChild(b):document.body.appendChild(b)};this.$R=function(b){return b.parentNode.removeChild(b)};this.$S=function(b){this.$(b).style.display=
"block"};this.$H=function(b){this.$(b).style.display="none"}}),KankanEventObj=KankanObj.extend(new function(){this.init=function(){this._super();this.attachEvent=this.addEventListener;this.detachEvent=this.removeEventListener;this.fireEvent=this.dispatchEvent};this.addEventListener=function(e,b,a,c){this[b]||(this[b]=[]);if(!(this[b]instanceof Array))return false;for(var d=0;d<this[b].length;d++)if(this[b][d].o==e&&this[b][d].f==a)return true;this[b].push({o:e,f:a,t:c});return true};this.removeEventListener=
function(e,b,a){if(!this[b]||!(this[b]instanceof Array))return false;for(var c=0;c<this[b].length;c++)if(this[b][c].o==e&&this[b][c].f==a){this[b].splice(c,1);0==this[b].length&&delete this[b];return true}return false};this.dispatchEvent=function(e){if(!this[e]||!(this[e]instanceof Array))return false;for(var b=[this].concat(argumentsToArray(arguments)),a=this[e].slice(0),c=0;c<a.length;c++)typeof a[c].t=="number"?a[c].f.delayApply(a[c].t,a[c].o,b):a[c].f.apply(a[c].o,b);return true};this.bindEvents=
function(e,b,a,c){for(var d=0;d<a.length;d++){var f=a[d],g="f_"+f;b[g]&&e.attachEvent(b,f,b[g]);if(c[f])for(g=0;g<c[f].length;g++)b[c[f][g]]&&e.attachEvent(b,f,b[c[f][g]])}}}),KKPlayerError=KankanEventObj.extend(new function(){var e={"001":"抱歉，您使用的设备暂不支持HTML5 Video！","002":"抱歉，没有找到播放地址！","003":"抱歉，没找到播放地址,请选择播放其他节目!","1189":"播放错误（1189），<a href='javascript:;' onclick='window.location.reload();return false;'>加载重试</a>"},b={10002:"临时文件打开失败，请刷新页面重试"},a=0,c="";this.setFeedbackParam=function(d){c=d};this.getFeedbackParam=
function(){return c};this.getErrorMap=function(d){return d?b:e};this.init=function(){this._super();this.debugShowed=false};this.reInit=function(){this.bufferError=false};this.dump=function(d,f){a++;var g=window.G_PLAYER_INSTANCE;this.trace("------ERROR-CODE:"+d);if(f)return false;if(typeof e[d]!="undefined"){var h=e[d].split("|");if(g&&g.showError)g.showError(escape(h[0]),escape(h[1]));else{g=h[0];if(d=="003"||d=="004")this.$("playerError").className="error";else this.$("playerError").className="errortxt";
this.$S("playerError");this.$("playerError").innerHTML='<p id="playerErrorContent">'+g+"<br/></p>"}return true}return false};this.showDebugDiv=function(){this.debugShowed=true;var d=this.$("_player"),f=this.$C("DIV");f.id="debugInfoContainer";f.style.width="100%";f.style.height="512px";f.style.zIndex="999999999";f.style.position="absolute";f.style.background="#FFFFFF";f.style.overflow="scroll";d.parentNode.insertBefore(f,d.nextSibling);d=this.getDebugBuffer();for(var g=0;g<d.length;g++)f.innerHTML+=
d[g]+" <br/>"};this.getDebugInfo=function(){for(var d=this.getDebugBuffer(),f="",g=0;g<d.length;g++)f+=d[g]+"\r\n";return f};this.playerLoadingDisplay=function(d){d=d&&G_PLAYER_INIT.playerstatus?"block":"none";var f=this.$("PlayerLoading");if(f&&d!==f.style.display)f.style.display=d};this.showPlayerWarm=function(d,f){var g=d?d:1189,h="";f=typeof f==="object"&&f instanceof Array?f:typeof e[g]!="undefined"?[e[g]]:["播放错误（1189），<a href='javascript:;' onclick='window.location.reload();return false;'>加载重试</a>"];
g=0;for(var i=f.length;g<i;g++)h+="<p>"+f[g].toString()+"</p>";if(!this.$("PlayerWarm")){g=this.$C("div");g.id="PlayerWarm";g.className="player_warm";this.$P(g,this.$("_player"))}if(this.$("PlayerCtrl")){this.$("PlayerCtrl").pause();this.$("PlayerCtrl").style.display="none"}this.$("PlayerWarm").innerHTML=h;this.$("PlayerWarm").style.display="block"};this.clearPlayerWarm=function(){try{this.$("PlayerCtrl").style.display="block";this.$("PlayerWarm").style.display="none";this.$("PlayerWarm").innerHTML=
""}catch(d){}}}),KKPlayerInit=KankanEventObj.extend(new function(){this.init=function(){this._super();this.playerstatus=1;this.h5Available=this.playerLoaded=false;this.h5playerObj=null;this.browserCheck()};this.browserCheck=function(){this.isOpera=/oupeng/i.test(navigator.userAgent.toLowerCase());this.operaFirsEvent=null};this.checkH5Video=function(){if(document.createElement("video").canPlayType)if(document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return true;
return false};this.printH5Object=function(e,b,a,c,d,f){if(!(this.$(e).clientWidth||this.$(e).offsetWidth)){this.printH5Object.delayCall(50,this,e,b,a,c,d,f);return false}b=parseInt((this.$(e).clientWidth||this.$(e).offsetWidth||screen.width)*0.5625);a=this.$C("video");a.id="PlayerCtrl";a.style.width="100%";c=document.documentElement.clientHeight*0.95;b=b>c?c:b;a.style.height=b+"px";a.controls="controls";a.poster=window.G_MOVIE&&window.G_MOVIE.poster||"";a.autobuffer=true;a.autoplay=true;this.$P(a,
this.$(e));this.$(e).style.height=b+"px";this.h5playerObj=a;G_PLAYER_INSTANCE=new KKPlayerInstance;this.h5eventHandler(a);this.playerLoaded=true};this.h5eventHandler=function(e){e.addEventListener("loadstart",function(){ G_PLAYER_INSTANCE.fireEvent.delayCall(0,G_PLAYER_INSTANCE,"onopen")});e.addEventListener("playing",function(){G_PLAYER_INSTANCE.fireEvent.delayCall(0,G_PLAYER_INSTANCE,"onplaying")});e.addEventListener("pause",function(){G_PLAYER_INSTANCE.fireEvent.delayCall(0,G_PLAYER_INSTANCE,"onPause")});
e.addEventListener("ended",function(){G_PLAYER_INSTANCE.fireEvent.delayCall(0,G_PLAYER_INSTANCE,"onEnd")})};this.debugInfo=function(e){if(!$("debugInfo")){$node=document.querySelector(".title");$div=document.createElement("div");$div.id="debugInfo";$div.style="width:100%";$node.appendChild($div);this.i=0}if(this.i<1E3){$div.innerHTML=$div.innerHTML+" "+e.toString();this.i++}else{$div.innerHTML=e.toString();this.i=1}};this.printObject=function(e,b,a,c,d,f){G_PLAYER_INIT.trace("---page printobject---");
if(this.checkH5Video()){this.printH5Object(e,b,a,c,d,f);this.getParameter("d")==1&&G_PLAYER_ERROR.showDebugDiv()}else{G_PLAYER_ERROR.showPlayerWarm("001");G_PLAYER_ERROR.dump("001")}}}),KKPlayerInstance=KankanEventObj.extend(new function(){var e=function(a){this.lastEvent=="onopen"&&this.timeStampObj.play==0&&a==this.timeStampObj.open&&G_PLAYER_ERROR.dump("010",true)},b=function(a){this.lastEvent=="init"&&a==this.timeStampObj.open&&this.timeStampObj.fopen==0&&G_PLAYER_ERROR.dump("011",true)};this.init=
function(){this._super();this.$video=this.$("PlayerCtrl");this.playMode="VOD";this.bufferStart=10;this.title="";this.isBuffering=false;this.submovieid=this.bufferStartPos=0;this.subname="";this.movieid=0;this.lastEvent="init";this.timeStampObj={open:0,fopen:0,play:0};this.sid=0;this.eventQueue=[0,0,0,0,0,0,0,0,0,0];this.bufferTimes=0;this.downPos={lastDrag:0,now:0};this.orientationChange();this.elementIdFullScreen=["m_down","m_header","nav","m_section","m_footer"];this.elementIdExitFullScreen=["m_header",
"m_section","m_footer"];this.firstOrientation=null;this.firstOrientationFlag=false;this.setFirstOrientation();this.orientation=""};this.open=function(a,c,d,f,g,h,i){G_PLAYER_ERROR.reInit();this.playMode="VOD";this.bufferBeginTime=this.bufferTimes=0;this.lastVideoUrl=a;this.isBufferCalc=false;this.start=c;this.quality=d;if(f)this.qualitystr=f;this.subStart=g;this.subEnd=h;this.vcut=i;this.lastEvent="preOpen";this.flashopen(a,false);this.timeStampObj={open:(new Date).valueOf(),fopen:0,play:0};e.delayCall(6E4,
G_PLAYER_INSTANCE,this.timeStampObj.open);b.delayCall(1E4,G_PLAYER_INSTANCE,this.timeStampObj.open)};this.reopen=function(a){this.open(this.lastVideoUrl,a,this.quality,this.qualitystr,this.subStart,this.subEnd,this.vcut)};this.close=function(){this.playMode="";this.$video.pause();this.setLastEvent("init",0)};this.pause=function(){this.$video.pause()};this.play=function(){this.$video.play()};this.stop=function(){this.$video.pause()};this.playerDisplay=function(a){a=a?"block":"none";this.$video.style.display=
a};this.getPlayPosition=function(){};this.getPlayUrl=function(){return this.$video.flv_getPlayUrl()};this.flashopen=function(a,c,d,f){c=G_PLAYER_INIT.h5playerObj;c.src=d?"http://"+d.ip+":80/"+d.path+"?key=&key1=":a;c.autoplay=f==1?true:false;c.poster=this.frontpageUrl};this.setnStat=function(a,c){this.trace("setnStat key="+a+", value="+c);return false};this.showError=function(){this.$video.pause()};this.getPlayStatus=function(){return-1};this.setLastEvent=function(a,c){this.lastEvent=a;if(c>0){this.eventQueue.unshift(c);
this.eventQueue=this.eventQueue.slice(0,10)}};this.windowOpen=function(a){window.open(a)};this.getHeight=function(){return parseFloat(this.$video.style.height)};this.setHeight=function(a){a=parseFloat(a)+"px";this.$video.style.height=a;this.$video.parentNode.style.height=a};this.orientationChange=function(){var a=this;if(window.location.href.split("/")[3]==="a"){this.rsizeVideoNocpr();window.addEventListener("orientationchange",function(){a.rsizeVideoNocpr()},false);return false}else{window.addEventListener("resize",
function(){setTimeout(function(){if(!a.$video)return false;a.orientationLock=true;var d=a.getOrientationByOrientation();if(d===a.orientation)return false;else a.orientation=d;if(a.firstOrientationFlag){a.firstOrientationFlag=false;return a.orientationLock=false}a.orientation==="portrait"?a.exitFullScreen("portrait"):a.fullScreen("landscape");a.orientationLock=false},50)});window.addEventListener("orientationchange",function(){setTimeout(function(){a.orientation=a.getOrientationByOrientation();a.orientation===
"portrait"?a.exitFullScreen("portrait"):a.fullScreen("landscape")},300)},false);var c=navigator.userAgent.toLowerCase();this.isIOS=/iphone/.test(c)||/ipod/.test(c);this.isUC=/ucbrowser/.test(c);this.isQQ=/mqqbrowser/.test(c);this.navSearchTag=false;if(this.isIOS&&this.isUC||this.isIOS&&this.isQQ)setInterval(function(){a.orientation=a.getOrientationByScreen();a.orientation==="portrait"?a.exitFullScreen("portrait"):a.fullScreen("landscape")},500)}};this.setFirstOrientation=function(){this.firstOrientation=
this.getOrientationByOrientation();if(this.firstOrientation=="landscape")this.firstOrientationFlag=true};this.getOrientationByOrientation=function(){return window.orientation===0||window.orientation==180?"portrait":"landscape"};this.getOrientationByScreen=function(){return document.documentElement.clientWidth/document.documentElement.clientHeight>1?"landscape":"portrait"};this.fullScreen=function(a){if($("m_header").style.display=="none")return false;for(var c=this.elementIdFullScreen.length,d=0;d<
c;d++)$(this.elementIdFullScreen[d]).style.display="none";this.rsizeVideo(a);window.scrollTo(0,1)};this.exitFullScreen=function(a){if($("m_header").style.display=="block")return false;this.rsizeVideo(a);a=this.elementIdExitFullScreen.length;for(var c=0;c<a;c++)$(this.elementIdExitFullScreen[c]).style.display="block";if(window.wap_pageAction.IS_TITLE_BAR_CLOSE)$("m_down").style.display="none";else $("m_down").style.display="block";if(window.wap_pageAction.IS_NAV_LIST_CLOSE)$("nav").style.display="none";
else $("nav").style.display="block"};this.rsizeVideo=function(a){if(a=="portrait"){a=(this.$video.parentNode.clientWidth||this.$video.parentNode.offsetWidth||screen.width)*0.5625;var c=document.documentElement.clientHeight;a=a>c?c:a}else a=document.documentElement.clientHeight;this.getHeight()!=a&&this.setHeight(a)};this.rsizeVideoNocpr=function(){if(window.location.href.split("/")[3]!="a")return false;if(window.orientation===0||window.orientation==180)var a=setInterval(function(){if(this.$("top")&&
this.$("nav")){clearInterval(a);var c=parseFloat(document.defaultView.getComputedStyle(this.$("top"),null).height),d=parseFloat(document.defaultView.getComputedStyle(this.$("nav"),null).height);c=document.documentElement.clientHeight-c-d;d=parseFloat($("PlayerCtrl").style.height);$("_player").style.height=c+"px";$("PlayerCtrl").style.marginTop=(c-d)/2+"px"}},100)}}),G_PLAYER_ERROR=new KKPlayerError,G_PLAYER_INIT=new KKPlayerInit;
